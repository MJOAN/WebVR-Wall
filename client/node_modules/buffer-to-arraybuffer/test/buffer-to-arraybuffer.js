var test = require('tape');
var bufferToArrayBuffer = require('../buffer-to-arraybuffer');

function bufferEqual(a, b) {
  for (var i = 0; i < a.length; i++) {
      if (a[i] !== b[i]) return false;
  }
  return true;
}

<<<<<<< HEAD
function arrayBufferToString(b) {
  return String.fromCharCode.apply(null, new Uint8Array(b));
}

=======
>>>>>>> dd91e06c... first commit
test('bufferToArrayBuffer', function (t) {
  t.plan(2);

  var str = 'abc';

<<<<<<< HEAD
  var b = new Buffer(str.length);
  b.write(str, 0);

  var ab = new ArrayBuffer(str.length);
  var v = new DataView(ab);
  str.split('').forEach(function(s, i) {
    v.setUint8(i, s.charCodeAt(0));
=======
  var b = new Buffer(12);
  b.write(str, 0);

  var ab = new ArrayBuffer(12);
  var v = new DataView(ab);
  [].slice.call(str).forEach(function(s, i) {
    v[i] = s.charCodeAt(0);
>>>>>>> dd91e06c... first commit
  });

  var cab = bufferToArrayBuffer(b);

<<<<<<< HEAD
  t.strictEqual(bufferEqual(cab, b), true);
  t.equal(arrayBufferToString(cab), str);
=======
  t.strictEqual(bufferEqual(cab, ab), true);
  t.equal(String.fromCharCode(cab[0]), 'a');
>>>>>>> dd91e06c... first commit
});
